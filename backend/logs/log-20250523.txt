2025-05-23 13:06:23.693 +02:00 [INF] Application is starting
2025-05-23 13:06:23.726 +02:00 [INF] User profile is available. Using '/Users/pawelstaniul/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-23 13:06:23.755 +02:00 [WRN] The WebRootPath was not found: /Users/pawelstaniul/Desktop/Programy/school-logbook/backend/wwwroot. Static files may be unavailable.
2025-05-23 13:06:23.761 +02:00 [INF] Now listening on: http://localhost:5234
2025-05-23 13:06:23.762 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-23 13:06:23.763 +02:00 [INF] Hosting environment: Development
2025-05-23 13:06:23.763 +02:00 [INF] Content root path: /Users/pawelstaniul/Desktop/Programy/school-logbook/backend
2025-05-23 13:06:32.941 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/auth/login - null null
2025-05-23 13:06:32.956 +02:00 [WRN] Failed to determine the https port for redirect.
2025-05-23 13:06:32.967 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:06:32.969 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/auth/login - 204 null null 31.1366ms
2025-05-23 13:06:32.974 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5234/api/auth/login - application/json 49
2025-05-23 13:06:32.976 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:06:32.996 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-05-23 13:06:33.010 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(backend.DTOs.Login) on controller backend.Controllers.AuthController (backend).
2025-05-23 13:06:33.819 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-23 13:06:33.858 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-23 13:06:33.862 +02:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-23 13:06:33.866 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 853.7255ms
2025-05-23 13:06:33.866 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-05-23 13:06:33.871 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5234/api/auth/login - 404 null application/json; charset=utf-8 897.1672ms
2025-05-23 13:07:02.177 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/auth/login - null null
2025-05-23 13:07:02.180 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:02.180 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/auth/login - 204 null null 2.9267ms
2025-05-23 13:07:02.181 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5234/api/auth/login - application/json 55
2025-05-23 13:07:02.182 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:02.184 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-05-23 13:07:02.185 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(backend.DTOs.Login) on controller backend.Controllers.AuthController (backend).
2025-05-23 13:07:02.266 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-23 13:07:02.409 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-23 13:07:02.444 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-23 13:07:02.472 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-05-23 13:07:02.506 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-05-23 13:07:02.513 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-05-23 13:07:02.538 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-23 13:07:02.543 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-23 13:07:02.565 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-23 13:07:02.600 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-23 13:07:02.670 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p21='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AdminId] = @p1, [ConcurrencyStamp] = @p2, [DateAdded] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [IsActive] = @p6, [LastSuccessfulLogin] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [StudentId] = @p16, [TeacherId] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-05-23 13:07:02.686 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 500.9509ms
2025-05-23 13:07:02.686 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-05-23 13:07:02.686 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5234/api/auth/login - 200 null application/json; charset=utf-8 505.2035ms
2025-05-23 13:07:02.694 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - null null
2025-05-23 13:07:02.695 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:02.695 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - 204 null null 0.3311ms
2025-05-23 13:07:02.696 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/logged-user - null null
2025-05-23 13:07:02.707 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:02.730 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:02.731 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:02.731 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - 204 null null 0.9575ms
2025-05-23 13:07:02.733 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:02.735 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:02.760 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-23 13:07:02.762 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:02.762 +02:00 [INF] Route matched with {action = "GetLoggedUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLoggedUser() on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:02.763 +02:00 [INF] Route matched with {action = "GetRoles", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:02.797 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__id_0
2025-05-23 13:07:02.822 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-23 13:07:02.859 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FirstName], [a].[LastName], [a].[UserId]
FROM [Admins] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-23 13:07:02.860 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDto'.
2025-05-23 13:07:02.864 +02:00 [INF] Executed action backend.Controllers.UserController.GetLoggedUser (backend) in 101.6963ms
2025-05-23 13:07:02.864 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-23 13:07:02.864 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/logged-user - 200 null application/json; charset=utf-8 168.3832ms
2025-05-23 13:07:02.929 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE([a].[Name], N'') AS [Name]
FROM [AspNetRoles] AS [a]
2025-05-23 13:07:02.930 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.Models.Role, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:02.930 +02:00 [INF] Executed action backend.Controllers.UserController.GetRoles (backend) in 167.4601ms
2025-05-23 13:07:02.931 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:02.931 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/roles - 200 null application/json; charset=utf-8 198.1269ms
2025-05-23 13:07:03.047 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-23 13:07:03.047 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:03.048 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 204 null null 0.9562ms
2025-05-23 13:07:03.049 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-23 13:07:03.049 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:03.051 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-23 13:07:03.057 +02:00 [INF] Route matched with {action = "GetUsersPaged", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersPaged(backend.Models.PagedRequest) on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:03.131 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
2025-05-23 13:07:03.178 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName], [a1].[Name] AS [RoleName], [a2].[Id], [a2].[FirstName], [a2].[LastName], [a2].[UserId], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId], [s].[Id], [s].[ClassId], [s].[FirstName], [s].[LastName], [s].[UserId]
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
ORDER BY [a1].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-23 13:07:03.184 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedUsers'.
2025-05-23 13:07:03.185 +02:00 [INF] Executed action backend.Controllers.UserController.GetUsersPaged (backend) in 128.5997ms
2025-05-23 13:07:03.186 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-23 13:07:03.186 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 200 null application/json; charset=utf-8 137.5904ms
2025-05-23 13:07:08.680 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - null null
2025-05-23 13:07:08.681 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:08.682 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - 204 null null 2.0777ms
2025-05-23 13:07:08.686 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/logged-user - null null
2025-05-23 13:07:08.690 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:08.695 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-23 13:07:08.696 +02:00 [INF] Route matched with {action = "GetLoggedUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLoggedUser() on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:08.711 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:08.712 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:08.713 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - 204 null null 0.8552ms
2025-05-23 13:07:08.714 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:08.715 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:08.734 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:08.734 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__id_0
2025-05-23 13:07:08.735 +02:00 [INF] Route matched with {action = "GetRoles", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:08.762 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-23 13:07:08.778 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE([a].[Name], N'') AS [Name]
FROM [AspNetRoles] AS [a]
2025-05-23 13:07:08.781 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.Models.Role, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:08.783 +02:00 [INF] Executed action backend.Controllers.UserController.GetRoles (backend) in 43.4611ms
2025-05-23 13:07:08.783 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:08.783 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/roles - 200 null application/json; charset=utf-8 69.1233ms
2025-05-23 13:07:08.804 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FirstName], [a].[LastName], [a].[UserId]
FROM [Admins] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-23 13:07:08.805 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDto'.
2025-05-23 13:07:08.808 +02:00 [INF] Executed action backend.Controllers.UserController.GetLoggedUser (backend) in 112.4532ms
2025-05-23 13:07:08.810 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-23 13:07:08.812 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/logged-user - 200 null application/json; charset=utf-8 126.4965ms
2025-05-23 13:07:09.030 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-23 13:07:09.030 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:09.030 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 204 null null 0.6717ms
2025-05-23 13:07:09.031 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-23 13:07:09.032 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:09.032 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-23 13:07:09.032 +02:00 [INF] Route matched with {action = "GetUsersPaged", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersPaged(backend.Models.PagedRequest) on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:09.061 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
2025-05-23 13:07:09.088 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName], [a1].[Name] AS [RoleName], [a2].[Id], [a2].[FirstName], [a2].[LastName], [a2].[UserId], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId], [s].[Id], [s].[ClassId], [s].[FirstName], [s].[LastName], [s].[UserId]
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
ORDER BY [a1].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-23 13:07:09.089 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedUsers'.
2025-05-23 13:07:09.089 +02:00 [INF] Executed action backend.Controllers.UserController.GetUsersPaged (backend) in 57.2204ms
2025-05-23 13:07:09.089 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-23 13:07:09.090 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 200 null application/json; charset=utf-8 58.3376ms
2025-05-23 13:07:15.179 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/class/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - null null
2025-05-23 13:07:15.180 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:15.181 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/class/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - 204 null null 1.2791ms
2025-05-23 13:07:15.182 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/class/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - null null
2025-05-23 13:07:15.183 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:15.184 +02:00 [INF] Executing endpoint 'backend.Controllers.ClassController.GetClassesPaged (backend)'
2025-05-23 13:07:15.189 +02:00 [INF] Route matched with {action = "GetClassesPaged", controller = "Class"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassesPaged(backend.Models.PagedRequest) on controller backend.Controllers.ClassController (backend).
2025-05-23 13:07:15.230 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Classes] AS [c]
2025-05-23 13:07:15.287 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t].[CreatedAt], [t].[UpdatedAt], CASE
    WHEN [t0].[Id] IS NOT NULL THEN COALESCE([t0].[FirstName], N'') + N' ' + COALESCE([t0].[LastName], N'')
    ELSE NULL
END AS [HomeroomTeacherName], (
    SELECT COUNT(*)
    FROM [Students] AS [s]
    WHERE [t].[Id] = [s].[ClassId]) AS [StudentCount]
FROM (
    SELECT [c].[Id], [c].[CreatedAt], [c].[HomeroomTeacherId], [c].[Name], [c].[UpdatedAt]
    FROM [Classes] AS [c]
    ORDER BY [c].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Teachers] AS [t0] ON [t].[HomeroomTeacherId] = [t0].[Id]
ORDER BY [t].[Name]
2025-05-23 13:07:15.289 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedClasses'.
2025-05-23 13:07:15.299 +02:00 [INF] Executed action backend.Controllers.ClassController.GetClassesPaged (backend) in 109.3911ms
2025-05-23 13:07:15.299 +02:00 [INF] Executed endpoint 'backend.Controllers.ClassController.GetClassesPaged (backend)'
2025-05-23 13:07:15.299 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/class/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - 200 null application/json; charset=utf-8 117.3924ms
2025-05-23 13:07:15.705 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/student/all - null null
2025-05-23 13:07:15.706 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:15.706 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/teacher/all - null null
2025-05-23 13:07:15.706 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/student/all - 204 null null 1.0889ms
2025-05-23 13:07:15.706 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:15.707 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/teacher/all - 204 null null 0.751ms
2025-05-23 13:07:15.708 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/student/all - null null
2025-05-23 13:07:15.708 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/teacher/all - null null
2025-05-23 13:07:15.709 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:15.709 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:15.709 +02:00 [INF] Executing endpoint 'backend.Controllers.StudentController.GetStudents (backend)'
2025-05-23 13:07:15.709 +02:00 [INF] Executing endpoint 'backend.Controllers.TeacherController.GetTeachers (backend)'
2025-05-23 13:07:15.713 +02:00 [INF] Route matched with {action = "GetStudents", controller = "Student"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudents() on controller backend.Controllers.StudentController (backend).
2025-05-23 13:07:15.713 +02:00 [INF] Route matched with {action = "GetTeachers", controller = "Teacher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTeachers() on controller backend.Controllers.TeacherController (backend).
2025-05-23 13:07:15.748 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName]
FROM [Teachers] AS [t]
2025-05-23 13:07:15.749 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.TeacherDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:15.749 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [c].[Name] AS [ClassName]
FROM [Students] AS [s]
LEFT JOIN [Classes] AS [c] ON [s].[ClassId] = [c].[Id]
ORDER BY [s].[LastName], [s].[FirstName]
2025-05-23 13:07:15.749 +02:00 [INF] Executed action backend.Controllers.TeacherController.GetTeachers (backend) in 35.7106ms
2025-05-23 13:07:15.749 +02:00 [INF] Executed endpoint 'backend.Controllers.TeacherController.GetTeachers (backend)'
2025-05-23 13:07:15.750 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/teacher/all - 200 null application/json; charset=utf-8 41.4916ms
2025-05-23 13:07:15.750 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.StudentDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:15.751 +02:00 [INF] Executed action backend.Controllers.StudentController.GetStudents (backend) in 37.6056ms
2025-05-23 13:07:15.751 +02:00 [INF] Executed endpoint 'backend.Controllers.StudentController.GetStudents (backend)'
2025-05-23 13:07:15.752 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/student/all - 200 null application/json; charset=utf-8 43.548ms
2025-05-23 13:07:17.074 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/subject/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - null null
2025-05-23 13:07:17.075 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:17.076 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/subject/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - 204 null null 1.66ms
2025-05-23 13:07:17.078 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/subject/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - null null
2025-05-23 13:07:17.080 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:17.081 +02:00 [INF] Executing endpoint 'backend.Controllers.SubjectController.GetSubjectsPaged (backend)'
2025-05-23 13:07:17.085 +02:00 [INF] Route matched with {action = "GetSubjectsPaged", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjectsPaged(backend.Models.PagedRequest) on controller backend.Controllers.SubjectController (backend).
2025-05-23 13:07:17.123 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
2025-05-23 13:07:17.179 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t].[CreatedAt], [t].[UpdatedAt], [t0].[ClassName], [t0].[TeacherFullName], [t0].[Id], [t0].[Id0], [t0].[Id1]
FROM (
    SELECT [s].[Id], [s].[Name], [s].[CreatedAt], [s].[UpdatedAt]
    FROM [Subjects] AS [s]
    ORDER BY [s].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [c0].[Name] AS [ClassName], [t1].[FirstName] + N' ' + [t1].[LastName] AS [TeacherFullName], [c].[Id], [c0].[Id] AS [Id0], [t1].[Id] AS [Id1], [c].[SubjectId]
    FROM [ClassSubjects] AS [c]
    INNER JOIN [Classes] AS [c0] ON [c].[ClassId] = [c0].[Id]
    INNER JOIN [Teachers] AS [t1] ON [c].[TeacherId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[SubjectId]
ORDER BY [t].[Name], [t].[Id], [t0].[Id], [t0].[Id0]
2025-05-23 13:07:17.183 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedSubjects'.
2025-05-23 13:07:17.186 +02:00 [INF] Executed action backend.Controllers.SubjectController.GetSubjectsPaged (backend) in 100.8772ms
2025-05-23 13:07:17.186 +02:00 [INF] Executed endpoint 'backend.Controllers.SubjectController.GetSubjectsPaged (backend)'
2025-05-23 13:07:17.186 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/subject/paged?pageNumber=1&pageSize=10&sortColumn=name&sortDirection=asc - 200 null application/json; charset=utf-8 108.1901ms
2025-05-23 13:07:17.659 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/class/all - null null
2025-05-23 13:07:17.660 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:17.660 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/class/all - 204 null null 0.8995ms
2025-05-23 13:07:17.660 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/teacher/all - null null
2025-05-23 13:07:17.661 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/class/all - null null
2025-05-23 13:07:17.661 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:17.661 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:17.662 +02:00 [INF] Executing endpoint 'backend.Controllers.ClassController.GetClasses (backend)'
2025-05-23 13:07:17.662 +02:00 [INF] Executing endpoint 'backend.Controllers.TeacherController.GetTeachers (backend)'
2025-05-23 13:07:17.662 +02:00 [INF] Route matched with {action = "GetTeachers", controller = "Teacher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTeachers() on controller backend.Controllers.TeacherController (backend).
2025-05-23 13:07:17.666 +02:00 [INF] Route matched with {action = "GetClasses", controller = "Class"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClasses() on controller backend.Controllers.ClassController (backend).
2025-05-23 13:07:17.686 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName]
FROM [Teachers] AS [t]
2025-05-23 13:07:17.686 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.TeacherDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:17.687 +02:00 [INF] Executed action backend.Controllers.TeacherController.GetTeachers (backend) in 24.4664ms
2025-05-23 13:07:17.687 +02:00 [INF] Executed endpoint 'backend.Controllers.TeacherController.GetTeachers (backend)'
2025-05-23 13:07:17.687 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/teacher/all - 200 null application/json; charset=utf-8 26.5132ms
2025-05-23 13:07:17.700 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Classes] AS [c]
2025-05-23 13:07:17.700 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.ClassDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:17.700 +02:00 [INF] Executed action backend.Controllers.ClassController.GetClasses (backend) in 33.726ms
2025-05-23 13:07:17.700 +02:00 [INF] Executed endpoint 'backend.Controllers.ClassController.GetClasses (backend)'
2025-05-23 13:07:17.701 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/class/all - 200 null application/json; charset=utf-8 39.4818ms
2025-05-23 13:07:19.286 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/classes-with-schedule - null null
2025-05-23 13:07:19.287 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:19.287 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/classes-with-schedule - 204 null null 0.6905ms
2025-05-23 13:07:19.288 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/classes-with-schedule - null null
2025-05-23 13:07:19.290 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:19.290 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetClassesWithSchedule (backend)'
2025-05-23 13:07:19.294 +02:00 [INF] Route matched with {action = "GetClassesWithSchedule", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassesWithSchedule() on controller backend.Controllers.ScheduleController (backend).
2025-05-23 13:07:19.353 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], (
    SELECT COUNT(*)
    FROM [Schedules] AS [s]
    WHERE [c].[Id] = [s].[ClassId]) AS [EntryCount]
FROM [Classes] AS [c]
ORDER BY [c].[Name]
2025-05-23 13:07:19.353 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.ClassWithScheduleDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:19.354 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetClassesWithSchedule (backend) in 59.7213ms
2025-05-23 13:07:19.355 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetClassesWithSchedule (backend)'
2025-05-23 13:07:19.355 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/classes-with-schedule - 200 null application/json; charset=utf-8 66.5605ms
2025-05-23 13:07:20.325 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - null null
2025-05-23 13:07:20.326 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:20.326 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - 204 null null 0.9854ms
2025-05-23 13:07:20.327 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-23 13:07:20.328 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:20.328 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - 204 null null 1.3304ms
2025-05-23 13:07:20.329 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - null null
2025-05-23 13:07:20.329 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:20.331 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-23 13:07:20.332 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:20.332 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-23 13:07:20.332 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-23 13:07:20.338 +02:00 [INF] Route matched with {action = "GetSubjectsForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjectsForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-23 13:07:20.338 +02:00 [INF] Route matched with {action = "GetScheduleForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetScheduleForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-23 13:07:20.400 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ClassId], [c].[SubjectId], [c].[TeacherId], [s].[Id], [s].[CreatedAt], [s].[Name], [s].[UpdatedAt], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId]
FROM [ClassSubjects] AS [c]
INNER JOIN [Subjects] AS [s] ON [c].[SubjectId] = [s].[Id]
INNER JOIN [Teachers] AS [t] ON [c].[TeacherId] = [t].[Id]
WHERE [c].[ClassId] = @__classId_0
2025-05-23 13:07:20.400 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[HomeroomTeacherId], [t].[Name], [t].[UpdatedAt], [t0].[Id], [t0].[ClassId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[StartTime], [t0].[SubjectId], [t0].[TeacherId], [t0].[UpdatedAt], [t0].[Id0], [t0].[CreatedAt0], [t0].[Name], [t0].[UpdatedAt0], [t0].[Id1], [t0].[FirstName], [t0].[LastName], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[HomeroomTeacherId], [c].[Name], [c].[UpdatedAt]
    FROM [Classes] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[ClassId], [s].[CreatedAt], [s].[DayOfWeek], [s].[StartTime], [s].[SubjectId], [s].[TeacherId], [s].[UpdatedAt], [s0].[Id] AS [Id0], [s0].[CreatedAt] AS [CreatedAt0], [s0].[Name], [s0].[UpdatedAt] AS [UpdatedAt0], [t1].[Id] AS [Id1], [t1].[FirstName], [t1].[LastName], [t1].[UserId]
    FROM [Schedules] AS [s]
    INNER JOIN [Subjects] AS [s0] ON [s].[SubjectId] = [s0].[Id]
    INNER JOIN [Teachers] AS [t1] ON [s].[TeacherId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[ClassId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Id0]
2025-05-23 13:07:20.433 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.SubjectWithTeachersDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:20.434 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetSubjectsForClass (backend) in 95.8494ms
2025-05-23 13:07:20.434 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-23 13:07:20.434 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - 200 null application/json; charset=utf-8 102.9815ms
2025-05-23 13:07:20.435 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.ScheduleForClassDto'.
2025-05-23 13:07:20.445 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetScheduleForClass (backend) in 106.6457ms
2025-05-23 13:07:20.445 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-23 13:07:20.445 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - 200 null application/json; charset=utf-8 116.4505ms
2025-05-23 13:07:40.815 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:40.816 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:40.816 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - 204 null null 0.6459ms
2025-05-23 13:07:40.817 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:40.817 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:40.818 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:40.818 +02:00 [INF] Route matched with {action = "GetRoles", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:40.843 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE([a].[Name], N'') AS [Name]
FROM [AspNetRoles] AS [a]
2025-05-23 13:07:40.844 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.Models.Role, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:40.844 +02:00 [INF] Executed action backend.Controllers.UserController.GetRoles (backend) in 25.4885ms
2025-05-23 13:07:40.844 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:40.844 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/roles - 200 null application/json; charset=utf-8 26.9108ms
2025-05-23 13:07:41.130 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-23 13:07:41.131 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:41.131 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 204 null null 0.489ms
2025-05-23 13:07:41.132 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-23 13:07:41.133 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:41.133 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-23 13:07:41.133 +02:00 [INF] Route matched with {action = "GetUsersPaged", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersPaged(backend.Models.PagedRequest) on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:41.159 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
2025-05-23 13:07:41.186 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName], [a1].[Name] AS [RoleName], [a2].[Id], [a2].[FirstName], [a2].[LastName], [a2].[UserId], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId], [s].[Id], [s].[ClassId], [s].[FirstName], [s].[LastName], [s].[UserId]
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
ORDER BY [a1].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-23 13:07:41.188 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedUsers'.
2025-05-23 13:07:41.188 +02:00 [INF] Executed action backend.Controllers.UserController.GetUsersPaged (backend) in 54.4124ms
2025-05-23 13:07:41.188 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-23 13:07:41.189 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 200 null application/json; charset=utf-8 56.327ms
2025-05-23 13:07:41.731 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/roles - null null
2025-05-23 13:07:41.731 +02:00 [INF] CORS policy execution successful.
2025-05-23 13:07:41.731 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:41.732 +02:00 [INF] Route matched with {action = "GetRoles", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller backend.Controllers.UserController (backend).
2025-05-23 13:07:41.765 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE([a].[Name], N'') AS [Name]
FROM [AspNetRoles] AS [a]
2025-05-23 13:07:41.765 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.Models.Role, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-23 13:07:41.765 +02:00 [INF] Executed action backend.Controllers.UserController.GetRoles (backend) in 33.5105ms
2025-05-23 13:07:41.765 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-23 13:07:41.766 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/roles - 200 null application/json; charset=utf-8 34.8642ms
