2025-05-19 20:41:21.864 +02:00 [INF] Application is starting
2025-05-19 20:41:21.896 +02:00 [INF] User profile is available. Using '/Users/pawelstaniul/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-19 20:41:21.935 +02:00 [WRN] The WebRootPath was not found: /Users/pawelstaniul/Desktop/Programy/school-logbook/backend/wwwroot. Static files may be unavailable.
2025-05-19 20:41:21.941 +02:00 [INF] Now listening on: http://localhost:5234
2025-05-19 20:41:21.943 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-19 20:41:21.944 +02:00 [INF] Hosting environment: Development
2025-05-19 20:41:21.944 +02:00 [INF] Content root path: /Users/pawelstaniul/Desktop/Programy/school-logbook/backend
2025-05-19 20:41:22.486 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/swagger/index.html - null null
2025-05-19 20:41:22.537 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/swagger/index.html - 200 null text/html;charset=utf-8 52.5881ms
2025-05-19 20:41:22.601 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/swagger/swagger-ui-bundle.js - null null
2025-05-19 20:41:22.601 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/swagger/swagger-ui-standalone-preset.js - null null
2025-05-19 20:41:22.601 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/swagger/swagger-ui.css - null null
2025-05-19 20:41:22.601 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/_framework/aspnetcore-browser-refresh.js - null null
2025-05-19 20:41:22.656 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 54.7772ms
2025-05-19 20:41:22.682 +02:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-19 20:41:22.682 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-19 20:41:22.683 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 82.0293ms
2025-05-19 20:41:22.684 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/swagger/swagger-ui.css - 200 143943 text/css 82.5044ms
2025-05-19 20:41:22.691 +02:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-19 20:41:22.691 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 89.8885ms
2025-05-19 20:41:22.810 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/swagger/v1/swagger.json - null null
2025-05-19 20:41:22.883 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.3635ms
2025-05-19 20:41:25.622 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:41:25.624 +02:00 [WRN] Failed to determine the https port for redirect.
2025-05-19 20:41:25.636 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:25.637 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - 204 null null 14.8197ms
2025-05-19 20:41:25.637 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:41:25.638 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:25.680 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '5/16/2025 3:41:28 PM', Current time (UTC): '5/19/2025 6:41:25 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-19 20:41:25.685 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '5/16/2025 3:41:28 PM', Current time (UTC): '5/19/2025 6:41:25 PM'.
2025-05-19 20:41:25.686 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:41:25.697 +02:00 [INF] Route matched with {action = "GetLoggedUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLoggedUser() on controller backend.Controllers.UserController (backend).
2025-05-19 20:41:25.755 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-05-19 20:41:25.757 +02:00 [INF] Executed action backend.Controllers.UserController.GetLoggedUser (backend) in 59.2588ms
2025-05-19 20:41:25.757 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:41:25.758 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/logged-user - 400 null text/plain; charset=utf-8 121.3003ms
2025-05-19 20:41:32.317 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/auth/login - null null
2025-05-19 20:41:32.320 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:32.320 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/auth/login - 204 null null 3.6822ms
2025-05-19 20:41:32.322 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5234/api/auth/login - application/json 55
2025-05-19 20:41:32.323 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:32.325 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-05-19 20:41:32.334 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(backend.DTOs.Login) on controller backend.Controllers.AuthController (backend).
2025-05-19 20:41:33.014 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-19 20:41:33.141 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-19 20:41:33.167 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-19 20:41:33.186 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-05-19 20:41:33.209 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-05-19 20:41:33.214 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-05-19 20:41:33.230 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-19 20:41:33.234 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-19 20:41:33.246 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-19 20:41:33.269 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-19 20:41:33.331 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p21='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AdminId] = @p1, [ConcurrencyStamp] = @p2, [DateAdded] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [IsActive] = @p6, [LastSuccessfulLogin] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [StudentId] = @p16, [TeacherId] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-05-19 20:41:33.341 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1006.8451ms
2025-05-19 20:41:33.341 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-05-19 20:41:33.343 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5234/api/auth/login - 200 null application/json; charset=utf-8 1021.4805ms
2025-05-19 20:41:33.345 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:41:33.346 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:33.346 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - 204 null null 0.8357ms
2025-05-19 20:41:33.347 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:41:33.348 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:33.359 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:41:33.359 +02:00 [INF] Route matched with {action = "GetLoggedUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLoggedUser() on controller backend.Controllers.UserController (backend).
2025-05-19 20:41:33.368 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - null null
2025-05-19 20:41:33.369 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:33.370 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/roles - 204 null null 1.8438ms
2025-05-19 20:41:33.371 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/roles - null null
2025-05-19 20:41:33.372 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:33.375 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-19 20:41:33.377 +02:00 [INF] Route matched with {action = "GetRoles", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller backend.Controllers.UserController (backend).
2025-05-19 20:41:33.417 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__id_0
2025-05-19 20:41:33.432 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-19 20:41:33.458 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FirstName], [a].[LastName], [a].[UserId]
FROM [Admins] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-19 20:41:33.459 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDto'.
2025-05-19 20:41:33.463 +02:00 [INF] Executed action backend.Controllers.UserController.GetLoggedUser (backend) in 103.3337ms
2025-05-19 20:41:33.463 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:41:33.468 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/logged-user - 200 null application/json; charset=utf-8 118.9417ms
2025-05-19 20:41:33.501 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE([a].[Name], N'') AS [Name]
FROM [AspNetRoles] AS [a]
2025-05-19 20:41:33.502 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.Models.Role, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-19 20:41:33.502 +02:00 [INF] Executed action backend.Controllers.UserController.GetRoles (backend) in 125.2267ms
2025-05-19 20:41:33.502 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetRoles (backend)'
2025-05-19 20:41:33.503 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/roles - 200 null application/json; charset=utf-8 131.1416ms
2025-05-19 20:41:33.679 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-19 20:41:33.679 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:33.680 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 204 null null 0.4676ms
2025-05-19 20:41:33.681 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - null null
2025-05-19 20:41:33.681 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:33.682 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-19 20:41:33.685 +02:00 [INF] Route matched with {action = "GetUsersPaged", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersPaged(backend.Models.PagedRequest) on controller backend.Controllers.UserController (backend).
2025-05-19 20:41:33.733 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
2025-05-19 20:41:33.763 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName], [a1].[Name] AS [RoleName], [a2].[Id], [a2].[FirstName], [a2].[LastName], [a2].[UserId], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId], [s].[Id], [s].[ClassId], [s].[FirstName], [s].[LastName], [s].[UserId]
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
ORDER BY [a1].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-19 20:41:33.768 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedUsers'.
2025-05-19 20:41:33.769 +02:00 [INF] Executed action backend.Controllers.UserController.GetUsersPaged (backend) in 83.7107ms
2025-05-19 20:41:33.769 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-19 20:41:33.769 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery= - 200 null application/json; charset=utf-8 88.9126ms
2025-05-19 20:41:41.243 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Teacher - null null
2025-05-19 20:41:41.245 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:41.245 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Teacher - 204 null null 1.8229ms
2025-05-19 20:41:41.246 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Teacher - null null
2025-05-19 20:41:41.247 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:41.249 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-19 20:41:41.249 +02:00 [INF] Route matched with {action = "GetUsersPaged", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersPaged(backend.Models.PagedRequest) on controller backend.Controllers.UserController (backend).
2025-05-19 20:41:41.296 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__request_SearchQuery_0_contains='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
WHERE [a1].[Name] LIKE @__request_SearchQuery_0_contains ESCAPE N'\'
2025-05-19 20:41:41.333 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__request_SearchQuery_0_contains='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName], [a1].[Name] AS [RoleName], [a2].[Id], [a2].[FirstName], [a2].[LastName], [a2].[UserId], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId], [s].[Id], [s].[ClassId], [s].[FirstName], [s].[LastName], [s].[UserId]
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
WHERE [a1].[Name] LIKE @__request_SearchQuery_0_contains ESCAPE N'\'
ORDER BY [a1].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-05-19 20:41:41.334 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedUsers'.
2025-05-19 20:41:41.335 +02:00 [INF] Executed action backend.Controllers.UserController.GetUsersPaged (backend) in 85.4868ms
2025-05-19 20:41:41.335 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-19 20:41:41.335 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Teacher - 200 null application/json; charset=utf-8 88.5316ms
2025-05-19 20:41:43.161 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Student - null null
2025-05-19 20:41:43.161 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:43.161 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Student - 204 null null 0.5891ms
2025-05-19 20:41:43.162 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Student - null null
2025-05-19 20:41:43.163 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:41:43.163 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-19 20:41:43.163 +02:00 [INF] Route matched with {action = "GetUsersPaged", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersPaged(backend.Models.PagedRequest) on controller backend.Controllers.UserController (backend).
2025-05-19 20:41:43.190 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__request_SearchQuery_0_contains='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
WHERE [a1].[Name] LIKE @__request_SearchQuery_0_contains ESCAPE N'\'
2025-05-19 20:41:43.207 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_SearchQuery_0_contains='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName], [a1].[Name] AS [RoleName], [a2].[Id], [a2].[FirstName], [a2].[LastName], [a2].[UserId], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId], [s].[Id], [s].[ClassId], [s].[FirstName], [s].[LastName], [s].[UserId]
FROM [AspNetUsers] AS [a]
INNER JOIN [AspNetUserRoles] AS [a0] ON [a].[Id] = [a0].[UserId]
INNER JOIN [AspNetRoles] AS [a1] ON [a0].[RoleId] = [a1].[Id]
LEFT JOIN [Admins] AS [a2] ON [a].[Id] = [a2].[UserId]
LEFT JOIN [Teachers] AS [t] ON [a].[Id] = [t].[UserId]
LEFT JOIN [Students] AS [s] ON [a].[Id] = [s].[UserId]
WHERE [a1].[Name] LIKE @__request_SearchQuery_0_contains ESCAPE N'\'
ORDER BY [a1].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-05-19 20:41:43.208 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.PagedUsers'.
2025-05-19 20:41:43.208 +02:00 [INF] Executed action backend.Controllers.UserController.GetUsersPaged (backend) in 44.3513ms
2025-05-19 20:41:43.208 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetUsersPaged (backend)'
2025-05-19 20:41:43.208 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/paged?pageNumber=1&pageSize=10&sortColumn=role&sortDirection=asc&searchQuery=Student - 200 null application/json; charset=utf-8 45.5906ms
2025-05-19 20:43:54.908 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/classes-with-schedule - null null
2025-05-19 20:43:54.910 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:43:54.911 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/classes-with-schedule - 204 null null 2.7598ms
2025-05-19 20:43:54.912 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/classes-with-schedule - null null
2025-05-19 20:43:54.916 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:43:54.924 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetClassesWithSchedule (backend)'
2025-05-19 20:43:54.945 +02:00 [INF] Route matched with {action = "GetClassesWithSchedule", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassesWithSchedule() on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:43:54.982 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], (
    SELECT COUNT(*)
    FROM [Schedules] AS [s]
    WHERE [c].[Id] = [s].[ClassId]) AS [EntryCount]
FROM [Classes] AS [c]
ORDER BY [c].[Name]
2025-05-19 20:43:54.984 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.ClassWithScheduleDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-19 20:43:54.986 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetClassesWithSchedule (backend) in 40.006ms
2025-05-19 20:43:54.986 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetClassesWithSchedule (backend)'
2025-05-19 20:43:54.986 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/classes-with-schedule - 200 null application/json; charset=utf-8 73.5159ms
2025-05-19 20:44:02.316 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - null null
2025-05-19 20:44:02.316 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:44:02.317 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - 204 null null 0.8018ms
2025-05-19 20:44:02.317 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-19 20:44:02.317 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:44:02.317 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - 204 null null 0.3347ms
2025-05-19 20:44:02.320 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-19 20:44:02.320 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - null null
2025-05-19 20:44:02.320 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:44:02.320 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:44:02.321 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-19 20:44:02.321 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-19 20:44:02.327 +02:00 [INF] Route matched with {action = "GetScheduleForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetScheduleForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:44:02.327 +02:00 [INF] Route matched with {action = "GetSubjectsForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjectsForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:44:02.367 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ClassId], [c].[SubjectId], [c].[TeacherId], [s].[Id], [s].[CreatedAt], [s].[Name], [s].[UpdatedAt], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId]
FROM [ClassSubjects] AS [c]
INNER JOIN [Subjects] AS [s] ON [c].[SubjectId] = [s].[Id]
INNER JOIN [Teachers] AS [t] ON [c].[TeacherId] = [t].[Id]
WHERE [c].[ClassId] = @__classId_0
2025-05-19 20:44:02.386 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[HomeroomTeacherId], [t].[Name], [t].[UpdatedAt], [t0].[Id], [t0].[ClassId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[StartTime], [t0].[SubjectId], [t0].[TeacherId], [t0].[UpdatedAt], [t0].[Id0], [t0].[CreatedAt0], [t0].[Name], [t0].[UpdatedAt0], [t0].[Id1], [t0].[FirstName], [t0].[LastName], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[HomeroomTeacherId], [c].[Name], [c].[UpdatedAt]
    FROM [Classes] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[ClassId], [s].[CreatedAt], [s].[DayOfWeek], [s].[StartTime], [s].[SubjectId], [s].[TeacherId], [s].[UpdatedAt], [s0].[Id] AS [Id0], [s0].[CreatedAt] AS [CreatedAt0], [s0].[Name], [s0].[UpdatedAt] AS [UpdatedAt0], [t1].[Id] AS [Id1], [t1].[FirstName], [t1].[LastName], [t1].[UserId]
    FROM [Schedules] AS [s]
    INNER JOIN [Subjects] AS [s0] ON [s].[SubjectId] = [s0].[Id]
    INNER JOIN [Teachers] AS [t1] ON [s].[TeacherId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[ClassId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Id0]
2025-05-19 20:44:02.393 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.SubjectWithTeachersDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-19 20:44:02.394 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetSubjectsForClass (backend) in 67.6772ms
2025-05-19 20:44:02.394 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-19 20:44:02.395 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - 200 null application/json; charset=utf-8 74.9191ms
2025-05-19 20:44:02.405 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.ScheduleForClassDto'.
2025-05-19 20:44:02.409 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetScheduleForClass (backend) in 82.5336ms
2025-05-19 20:44:02.409 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-19 20:44:02.409 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - 200 null application/json; charset=utf-8 89.4965ms
2025-05-19 20:46:36.186 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:46:36.187 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:36.188 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - 204 null null 1.8914ms
2025-05-19 20:46:36.188 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:46:36.189 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:36.190 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:46:36.191 +02:00 [INF] Route matched with {action = "GetLoggedUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLoggedUser() on controller backend.Controllers.UserController (backend).
2025-05-19 20:46:36.209 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__id_0
2025-05-19 20:46:36.217 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - null null
2025-05-19 20:46:36.217 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-19 20:46:36.217 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:36.217 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:36.217 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - 204 null null 0.246ms
2025-05-19 20:46:36.217 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - 204 null null 0.246ms
2025-05-19 20:46:36.218 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-19 20:46:36.218 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - null null
2025-05-19 20:46:36.219 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:36.219 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:36.219 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-19 20:46:36.219 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-19 20:46:36.219 +02:00 [INF] Route matched with {action = "GetSubjectsForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjectsForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:46:36.219 +02:00 [INF] Route matched with {action = "GetScheduleForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetScheduleForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:46:36.224 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-19 20:46:36.238 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[HomeroomTeacherId], [t].[Name], [t].[UpdatedAt], [t0].[Id], [t0].[ClassId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[StartTime], [t0].[SubjectId], [t0].[TeacherId], [t0].[UpdatedAt], [t0].[Id0], [t0].[CreatedAt0], [t0].[Name], [t0].[UpdatedAt0], [t0].[Id1], [t0].[FirstName], [t0].[LastName], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[HomeroomTeacherId], [c].[Name], [c].[UpdatedAt]
    FROM [Classes] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[ClassId], [s].[CreatedAt], [s].[DayOfWeek], [s].[StartTime], [s].[SubjectId], [s].[TeacherId], [s].[UpdatedAt], [s0].[Id] AS [Id0], [s0].[CreatedAt] AS [CreatedAt0], [s0].[Name], [s0].[UpdatedAt] AS [UpdatedAt0], [t1].[Id] AS [Id1], [t1].[FirstName], [t1].[LastName], [t1].[UserId]
    FROM [Schedules] AS [s]
    INNER JOIN [Subjects] AS [s0] ON [s].[SubjectId] = [s0].[Id]
    INNER JOIN [Teachers] AS [t1] ON [s].[TeacherId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[ClassId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Id0]
2025-05-19 20:46:36.239 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FirstName], [a].[LastName], [a].[UserId]
FROM [Admins] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-19 20:46:36.240 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDto'.
2025-05-19 20:46:36.241 +02:00 [INF] Executed action backend.Controllers.UserController.GetLoggedUser (backend) in 49.5476ms
2025-05-19 20:46:36.241 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:46:36.242 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/logged-user - 200 null application/json; charset=utf-8 53.2511ms
2025-05-19 20:46:36.245 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.ScheduleForClassDto'.
2025-05-19 20:46:36.246 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetScheduleForClass (backend) in 26.1746ms
2025-05-19 20:46:36.246 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-19 20:46:36.246 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - 200 null application/json; charset=utf-8 27.9767ms
2025-05-19 20:46:36.327 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ClassId], [c].[SubjectId], [c].[TeacherId], [s].[Id], [s].[CreatedAt], [s].[Name], [s].[UpdatedAt], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId]
FROM [ClassSubjects] AS [c]
INNER JOIN [Subjects] AS [s] ON [c].[SubjectId] = [s].[Id]
INNER JOIN [Teachers] AS [t] ON [c].[TeacherId] = [t].[Id]
WHERE [c].[ClassId] = @__classId_0
2025-05-19 20:46:36.327 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.SubjectWithTeachersDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-19 20:46:36.327 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetSubjectsForClass (backend) in 108.1143ms
2025-05-19 20:46:36.328 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-19 20:46:36.328 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - 200 null application/json; charset=utf-8 109.9098ms
2025-05-19 20:46:54.991 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - null null
2025-05-19 20:46:54.991 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-19 20:46:54.991 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:46:55.014 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:55.014 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:55.014 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:55.025 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4 - 204 null null 34.8537ms
2025-05-19 20:46:55.025 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/schedule/class/4/subjects - 204 null null 34.7902ms
2025-05-19 20:46:55.025 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5234/api/user/logged-user - 204 null null 34.8597ms
2025-05-19 20:46:55.029 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - null null
2025-05-19 20:46:55.029 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - null null
2025-05-19 20:46:55.029 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5234/api/user/logged-user - null null
2025-05-19 20:46:55.031 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:55.031 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:55.032 +02:00 [INF] CORS policy execution successful.
2025-05-19 20:46:55.033 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-19 20:46:55.033 +02:00 [INF] Executing endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:46:55.033 +02:00 [INF] Executing endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-19 20:46:55.035 +02:00 [INF] Route matched with {action = "GetSubjectsForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjectsForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:46:55.035 +02:00 [INF] Route matched with {action = "GetLoggedUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLoggedUser() on controller backend.Controllers.UserController (backend).
2025-05-19 20:46:55.036 +02:00 [INF] Route matched with {action = "GetScheduleForClass", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetScheduleForClass(Int32) on controller backend.Controllers.ScheduleController (backend).
2025-05-19 20:46:55.056 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AdminId], [a].[ConcurrencyStamp], [a].[DateAdded], [a].[Email], [a].[EmailConfirmed], [a].[IsActive], [a].[LastSuccessfulLogin], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[StudentId], [a].[TeacherId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__id_0
2025-05-19 20:46:55.057 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ClassId], [c].[SubjectId], [c].[TeacherId], [s].[Id], [s].[CreatedAt], [s].[Name], [s].[UpdatedAt], [t].[Id], [t].[FirstName], [t].[LastName], [t].[UserId]
FROM [ClassSubjects] AS [c]
INNER JOIN [Subjects] AS [s] ON [c].[SubjectId] = [s].[Id]
INNER JOIN [Teachers] AS [t] ON [c].[TeacherId] = [t].[Id]
WHERE [c].[ClassId] = @__classId_0
2025-05-19 20:46:55.059 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.SubjectWithTeachersDto, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-19 20:46:55.059 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetSubjectsForClass (backend) in 23.615ms
2025-05-19 20:46:55.059 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetSubjectsForClass (backend)'
2025-05-19 20:46:55.059 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4/subjects - 200 null application/json; charset=utf-8 30.109ms
2025-05-19 20:46:55.067 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[HomeroomTeacherId], [t].[Name], [t].[UpdatedAt], [t0].[Id], [t0].[ClassId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[StartTime], [t0].[SubjectId], [t0].[TeacherId], [t0].[UpdatedAt], [t0].[Id0], [t0].[CreatedAt0], [t0].[Name], [t0].[UpdatedAt0], [t0].[Id1], [t0].[FirstName], [t0].[LastName], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[HomeroomTeacherId], [c].[Name], [c].[UpdatedAt]
    FROM [Classes] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[ClassId], [s].[CreatedAt], [s].[DayOfWeek], [s].[StartTime], [s].[SubjectId], [s].[TeacherId], [s].[UpdatedAt], [s0].[Id] AS [Id0], [s0].[CreatedAt] AS [CreatedAt0], [s0].[Name], [s0].[UpdatedAt] AS [UpdatedAt0], [t1].[Id] AS [Id1], [t1].[FirstName], [t1].[LastName], [t1].[UserId]
    FROM [Schedules] AS [s]
    INNER JOIN [Subjects] AS [s0] ON [s].[SubjectId] = [s0].[Id]
    INNER JOIN [Teachers] AS [t1] ON [s].[TeacherId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[ClassId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Id0]
2025-05-19 20:46:55.068 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.ScheduleForClassDto'.
2025-05-19 20:46:55.068 +02:00 [INF] Executed action backend.Controllers.ScheduleController.GetScheduleForClass (backend) in 32.4739ms
2025-05-19 20:46:55.068 +02:00 [INF] Executed endpoint 'backend.Controllers.ScheduleController.GetScheduleForClass (backend)'
2025-05-19 20:46:55.068 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/schedule/class/4 - 200 null application/json; charset=utf-8 39.3092ms
2025-05-19 20:46:55.070 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-19 20:46:55.087 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FirstName], [a].[LastName], [a].[UserId]
FROM [Admins] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-05-19 20:46:55.088 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDto'.
2025-05-19 20:46:55.088 +02:00 [INF] Executed action backend.Controllers.UserController.GetLoggedUser (backend) in 52.6656ms
2025-05-19 20:46:55.088 +02:00 [INF] Executed endpoint 'backend.Controllers.UserController.GetLoggedUser (backend)'
2025-05-19 20:46:55.089 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5234/api/user/logged-user - 200 null application/json; charset=utf-8 59.3996ms
