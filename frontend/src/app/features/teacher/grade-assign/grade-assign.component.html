<div *ngIf="isLoading" class="mat-spinner">
    <mat-spinner></mat-spinner>
</div>

<div class="custom-container">
    <h1>Wystaw ocenę</h1>

    <hr class="my-5" />

    <form [formGroup]="form" (ngSubmit)="assignGrade()">
        <mat-form-field appearance="outline" class="mb-3">
            <mat-label>Przedmiot</mat-label>
            <mat-select formControlName="selectedSubject" (selectionChange)="onSubjectChange()">
                <mat-option *ngFor="let subject of subjects" [value]="subject">
                    {{ subject.subjectName }} – {{ subject.className }}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="mb-3">
            <mat-label>Uczeń</mat-label>
            <mat-select formControlName="studentId">
                <mat-option *ngFor="let student of students" [value]="student.id">
                    {{ student.fullName }}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="mb-3">
            <mat-label>Ocena</mat-label>
            <input matInput type="number" formControlName="gradeValue" min="1" max="6">
        </mat-form-field>

        <mat-form-field appearance="outline" class="mb-3">
            <mat-label>Opis</mat-label>
            <input matInput type="text" formControlName="comment">
        </mat-form-field>

        <button class="proceed" [disabled]="form.invalid || isLoading" type="submit">
            <span *ngIf="isLoading" class="loading-spinner"></span>
            <span *ngIf="!isLoading">
                Zapisz ocenę
            </span>
        </button>
    </form>
</div>